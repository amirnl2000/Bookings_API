 npm test

> express-bookings@1.0.0 test
> npm run test-positive && npm run test-negative


> express-bookings@1.0.0 test-positive
> newman run "./postman/collections/Bookings API.json" -e "./postman/environments/Local.postman_environment.json"

newman

Booking API

□ 00 Auth
└ http://{{baseURL}}:3000/login
  POST http://localhost:3000/login [200 OK, 440B, 142ms]
  √  Login returned token

□ 10 Users
└ Get all users
  GET http://localhost:3000/users [200 OK, 1.36kB, 4ms]

└ POST Create user
  POST http://localhost:3000/users [201 Created, 469B, 8ms]

└ Get User by ID
  GET http://localhost:3000/users/29b4de34-5ce8-48ef-9d97-121a3ae4f675 [200 OK, 439B, 3ms]

└ PUT Update user by ID
  PUT http://localhost:3000/users/29b4de34-5ce8-48ef-9d97-121a3ae4f675 [200 OK, 464B, 6ms]

└ DELETE User by ID
  DELETE http://localhost:3000/users/29b4de34-5ce8-48ef-9d97-121a3ae4f675 [200 OK, 280B, 8ms]

└ GET /users?username=jdoe
  GET http://localhost:3000/users?username=jdoe [200 OK, 451B, 4ms]

└ GET /users?email=johndoe@example.com
  GET http://localhost:3000/users?email=johndoe@example.com [200 OK, 451B, 3ms]

□ 20 Hosts
└ GET all hosts
  GET http://localhost:3000/hosts [200 OK, 2.23kB, 3ms]

└ POST Create host
  POST http://localhost:3000/hosts [201 Created, 551B, 9ms]

└ GET Host by ID
  GET http://localhost:3000/hosts/6409743d-e15a-4efd-8548-758c27d87b8c [200 OK, 546B, 4ms]

└ PUT Update host by ID
  PUT http://localhost:3000/hosts/6409743d-e15a-4efd-8548-758c27d87b8c [200 OK, 571B, 4ms]

└ DELETE host by ID
  DELETE http://localhost:3000/hosts/6409743d-e15a-4efd-8548-758c27d87b8c [200 OK, 280B, 10ms]

└ GET /hosts?name=John+Doe
  GET http://localhost:3000/hosts?name=John+Doe [200 OK, 550B, 2ms]

□ 30 Properties
└ GET all properties
  GET http://localhost:3000/properties [200 OK, 1.89kB, 3ms]
  ┌
  │ 'propertyId =', 'g9012345-67ef-0123-4567-89abcdef0123'
  └

└ POST Create property
  POST http://localhost:3000/properties [201 Created, 523B, 9ms]

└ GET propert by ID
  GET http://localhost:3000/properties/417502ed-d2aa-410f-b660-82fef7793222 [200 OK, 518B, 3ms]

└ PUT Update property by ID
  PUT http://localhost:3000/properties/417502ed-d2aa-410f-b660-82fef7793222 [200 OK, 518B, 4ms]

└ DELETE Property by ID
  DELETE http://localhost:3000/properties/417502ed-d2aa-410f-b660-82fef7793222 [200 OK, 251B, 13ms]

└ GET /properties?location=Malibu, California
  GET http://localhost:3000/properties?location=Malibu, California [200 OK, 557B, 3ms]

└ GET /properties?pricePerNight=310.25
  GET http://localhost:3000/properties?pricePerNight=310.25 [200 OK, 557B, 2ms]

└ GET /properties?location=Malibu, California&pricePerNight=310.25
  GET http://localhost:3000/properties?location=Malibu, California&pricePerNight=310.25 [200 OK, 557B, 3ms]

□ 40 Bookings
└ GET all bookings
  GET http://localhost:3000/bookings [200 OK, 1.41kB, 3ms]

└ Post Create booking
  POST http://localhost:3000/bookings [201 Created, 531B, 8ms]

└ GET Booking by ID
  GET http://localhost:3000/bookings/17c985ea-6e5c-4d7d-af00-d9f4ebb752c0 [200 OK, 526B, 3ms]

└ PUT Update booking by ID
  PUT http://localhost:3000/bookings/17c985ea-6e5c-4d7d-af00-d9f4ebb752c0 [401 Unauthorized, 271B, 2ms]

└ DELETE booking by ID
  DELETE http://localhost:3000/bookings/17c985ea-6e5c-4d7d-af00-d9f4ebb752c0 [401 Unauthorized, 271B, 2ms]

□ 50 Reviews
└ GET all reviews
  GET http://localhost:3000/reviews [200 OK, 1.11kB, 2ms]

└ POST Create review
  POST http://localhost:3000/reviews [201 Created, 461B, 9ms]

└ GET Review by ID
  GET http://localhost:3000/reviews/c496da1b-9a35-4967-859a-e5538ed45326 [200 OK, 456B, 3ms]

└ PUT Update review by ID
  PUT http://localhost:3000/reviews/c496da1b-9a35-4967-859a-e5538ed45326 [200 OK, 456B, 3ms]

└ DELETE Review by ID
  DELETE http://localhost:3000/reviews/c496da1b-9a35-4967-859a-e5538ed45326 [200 OK, 251B, 9ms]

□ Mentor checks
└ bookings?userId
  GET http://localhost:3000/bookings?userId=a1234567-89ab-cdef-0123-456789abcdef [404 Not Found, 273B, 2ms]
  √  Status code is 404

└ users?username
  GET http://localhost:3000/users?username=Notfound
 [404 Not Found, 270B, 2ms]
  √  Status code is 404

└ properties?pricePerNight
  GET http://localhost:3000/properties?pricePerNight=1000
 [404 Not Found, 274B, 2ms]
  √  Status code is 404

└ properties?location
  GET http://localhost:3000/properties?location=Notfound [404 Not Found, 274B, 2ms]
  √  Status code is 404

└ properties?pricePerNight + location
  GET http://localhost:3000/properties?pricePerNight=1000&location=Notfound
 [404 Not Found, 274B, 3ms]
  √  Status code is 404

└ hosts?name
  GET http://localhost:3000/hosts?name=John+Doef
 [404 Not Found, 270B, 2ms]
  √  Status code is 404

┌─────────────────────────┬──────────────────┬──────────────────┐
│                         │         executed │           failed │
├─────────────────────────┼──────────────────┼──────────────────┤
│              iterations │                1 │                0 │
├─────────────────────────┼──────────────────┼──────────────────┤
│                requests │               38 │                0 │
├─────────────────────────┼──────────────────┼──────────────────┤
│            test-scripts │               57 │                0 │
├─────────────────────────┼──────────────────┼──────────────────┤
│      prerequest-scripts │               38 │                0 │
├─────────────────────────┼──────────────────┼──────────────────┤
│              assertions │                7 │                0 │
├─────────────────────────┴──────────────────┴──────────────────┤
│ total run duration: 3.5s                                      │
├───────────────────────────────────────────────────────────────┤
│ total data received: 12.77kB (approx)                         │
├───────────────────────────────────────────────────────────────┤
│ average response time: 8ms [min: 2ms, max: 142ms, s.d.: 22ms] │
└───────────────────────────────────────────────────────────────┘

> express-bookings@1.0.0 test-negative
> newman run "./postman/collections/Bookings API Negative.json" -e "./postman/environments/Local.postman_environment.json"

newman

Bookings API Negative

□ users / {userId}
└ Get user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 27ms]
  GET http://localhost:3000/users/:userId [404 Not Found, 270B, 4ms]
  √  Response status code is 404

└ Update user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 5ms]
  PUT http://localhost:3000/users/d4567890-12 [404 Not Found, 260B, 3ms]
  √  Response status code is 404

└ Delete user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/users/d4567890-12ef-01 [404 Not Found, 260B, 3ms]
  √  Response status code is 404

□ users
└ Create a new user
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/users [400 Bad Request, 269B, 10ms]
  √  Response status code is 400

□ hosts / {hostId}
└ Get host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 23ms]
  GET http://localhost:3000/hosts/:hostId [404 Not Found, 270B, 4ms]
  √  Response status code is 404

└ Update host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  PUT http://localhost:3000/hosts/:hostId [404 Not Found, 260B, 3ms]
  √  Response status code is 404

└ Delete host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/hosts/:hostId [404 Not Found, 260B, 2ms]
  √  Response status code is 404

□ hosts
└ Create a new host
  POST http://0.0.0.0:3000/login [200 OK, 440B, 5ms]
  POST http://localhost:3000/hosts [400 Bad Request, 269B, 3ms]
  √  Response status code is 400

□ properties / {propertyId}
└ Get deleted property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [404 Not Found, 274B, 2ms]
  √  Response status code is 404

└ Get non-existent property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/properties/w0123456-78f0-1234-5678-9abcdef01234 [404 Not Found, 274B, 3ms]
  √  Response status code is 404

└ Update property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  PUT http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [404 Not Found, 264B, 3ms]
  √  Response status code is 404

└ Delete property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  DELETE http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [404 Not Found, 264B, 3ms]
  √  Response status code is 404

□ properties
└ Create a new property
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/properties [400 Bad Request, 269B, 3ms]
  √  Response status code is 400

□ bookings / {bookingId}
└ Get booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [404 Not Found, 273B, 2ms]
  √  Response status code is 404

└ Update booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  PUT http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [404 Not Found, 263B, 2ms]
  √  Response status code is 404

└ Delete booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  DELETE http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [404 Not Found, 263B, 2ms]
  √  Response status code is 404

□ bookings
└ Create a new booking
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  POST http://localhost:3000/bookings [400 Bad Request, 269B, 4ms]
  √  Response status code is 400

□ reviews / {reviewId}
└ Get review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [404 Not Found, 272B, 2ms]
  √  Response status code is 404

└ Update review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  PUT http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [404 Not Found, 262B, 4ms]
  √  Response status code is 404

└ Delete review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  DELETE http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [404 Not Found, 262B, 3ms]
  √  Response status code is 404

□ reviews
└ Create a new review
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  POST http://localhost:3000/reviews [400 Bad Request, 269B, 3ms]
  √  Response status code is 400

→ User Login
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/login [401 Unauthorized, 278B, 2ms]
  √  Response status code is 401

┌─────────────────────────┬─────────────────┬─────────────────┐
│                         │        executed │          failed │
├─────────────────────────┼─────────────────┼─────────────────┤
│              iterations │               1 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│                requests │              44 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│            test-scripts │              44 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│      prerequest-scripts │              22 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│              assertions │              22 │               0 │
├─────────────────────────┴─────────────────┴─────────────────┤
│ total run duration: 2.3s                                    │
├─────────────────────────────────────────────────────────────┤
│ total data received: 5.03kB (approx)                        │
├─────────────────────────────────────────────────────────────┤
│ average response time: 4ms [min: 2ms, max: 27ms, s.d.: 4ms] │
└─────────────────────────────────────────────────────────────┘