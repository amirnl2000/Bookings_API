npm test

> express-bookings@1.0.0 test-positive
> newman run "./postman/collections/Winc Bookings API.json" -e "./postman/environments/Local.postman_environment.json"

newman

Bookings API

□ users / {userId}
└ Get user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 28ms]
  GET http://localhost:3000/users/e5678901-23f0-1234-5678-9abcdef01234 [200 OK, 460B, 5ms]
  √  Response status code should be 200
  √  Id should be a non-empty string

└ Update user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  PUT http://localhost:3000/users/e5678901-23f0-1234-5678-9abcdef01234 [200 OK, 486B, 6ms]
  √  Response status code should be 200

└ Delete user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/users/e5678901-23f0-1234-5678-9abcdef01234 [200 OK, 280B, 10ms]
  √  Response status code should be 200

□ users
└ Get all users
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  GET http://localhost:3000/users [200 OK, 1.14kB, 2ms]
  √  Response status code should be 200
  √  Response is an array

└ Create a new user
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/users [201 Created, 454B, 6ms]
  √  Response status code should be 201

□ hosts / {hostId}
└ Get host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/hosts/e2345678-90bc-def0-0123-456789abcdef [200 OK, 566B, 3ms]
  √  Response status code should be 200
  √  ID is a non-empty string

└ Update host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  PUT http://localhost:3000/hosts/e2345678-90bc-def0-0123-456789abcdef [200 OK, 523B, 6ms]
  √  Response status code should be 200

└ Delete host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/hosts/e2345678-90bc-def0-0123-456789abcdef [200 OK, 280B, 11ms]
  √  Response status code should be 200

□ hosts
└ Get all hosts
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  GET http://localhost:3000/hosts [200 OK, 1.91kB, 2ms]
  √  Response status code should be 200
  √  Response body is an array

└ Create a new host
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  POST http://localhost:3000/hosts [201 Created, 535B, 5ms]
  √  Response status code should be 201

□ properties / {propertyId}
└ Get property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 5ms]
  GET http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [200 OK, 626B, 3ms]
  √  Response status code should be 200
  √  Id should be a non-empty string

└ Update property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  PUT http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [200 OK, 553B, 5ms]
  √  Response status code should be 200

└ Delete property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  DELETE http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [200 OK, 251B, 6ms]
  √  Response status code should be 200

□ properties
└ Get all properties
  POST http://0.0.0.0:3000/login [200 OK, 440B, 5ms]
  GET http://localhost:3000/properties [200 OK, 1.56kB, 2ms]
  √  Response status code should be 200
  √  Response is an array with at least one element
  √  maxGuestCount is a non-negative integer

└ Create a new property
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  POST http://localhost:3000/properties [201 Created, 585B, 7ms]
  √  Response status code should be 201

□ bookings / {bookingId}
└ Get booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  GET http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [200 OK, 532B, 2ms]
  √  Response status code should be 200
  √  Id should be a non-empty string
  √  userId is a non-empty string
  √  propertyId should be a non-empty string

└ Update booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  PUT http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [200 OK, 530B, 6ms]
  √  Response status code should be 200

└ Delete booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [200 OK, 251B, 22ms]
  √  Response status code should be 200

□ bookings
└ Get all bookings
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  GET http://localhost:3000/bookings [200 OK, 529B, 2ms]
  √  Response status code should be 200
  √  Response is an array
  √  Id should be a non-empty string
  √  userId is a non-empty string

└ Create a new booking
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/bookings [201 Created, 537B, 8ms]
  √  Response status code should be 201

□ reviews / {reviewId}
└ Get review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [200 OK, 477B, 3ms]
  √  Response status code should be 200
  √  Response has the required fields
  √  Id is a non-empty string
  √  userId is a non-empty string
  √  propertyId is a non-empty string

└ Update review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  PUT http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [200 OK, 437B, 5ms]
  √  Response status code should be 200

└ Delete review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 5ms]
  DELETE http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [200 OK, 251B, 6ms]
  √  Response status code should be 200

□ reviews
└ Get all reviews
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  GET http://localhost:3000/reviews [200 OK, 898B, 2ms]
  √  Response status code should be 200
  √  Response is an array with at least one element
  √  Id is a non-empty string
  √  userId is a non-empty string
  √  propertyId is a non-empty string

└ Create a new review
  POST http://0.0.0.0:3000/login [200 OK, 440B, 5ms]
  POST http://localhost:3000/reviews [201 Created, 472B, 7ms]
  √  Response status code should be 201

→ User Login
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  POST http://localhost:3000/login [200 OK, 440B, 2ms]
  √  Response status code should be 200
  √  Response has the required field 'token'
  √  Token is a non-empty string

┌─────────────────────────┬─────────────────┬─────────────────┐
│                         │        executed │          failed │
├─────────────────────────┼─────────────────┼─────────────────┤
│              iterations │               1 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│                requests │              52 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│            test-scripts │              52 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│      prerequest-scripts │              26 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│              assertions │              49 │               0 │
├─────────────────────────┴─────────────────┴─────────────────┤
│ total run duration: 2.7s                                    │
├─────────────────────────────────────────────────────────────┤
│ total data received: 14.69kB (approx)                       │
├─────────────────────────────────────────────────────────────┤
│ average response time: 5ms [min: 2ms, max: 28ms, s.d.: 4ms] │
└─────────────────────────────────────────────────────────────┘

> express-bookings@1.0.0 test-negative
> newman run "./postman/collections/Bookings API Negative.json" -e "./postman/environments/Local.postman_environment.json"

newman

Bookings API Negative

□ users / {userId}
└ Get user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 37ms]
  GET http://localhost:3000/users/:userId [404 Not Found, 270B, 5ms]
  √  Response status code is 404

└ Update user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  PUT http://localhost:3000/users/d4567890-12 [404 Not Found, 260B, 4ms]
  √  Response status code is 404

└ Delete user by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/users/d4567890-12ef-01 [404 Not Found, 260B, 3ms]
  √  Response status code is 404

□ users
└ Create a new user
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/users [400 Bad Request, 269B, 6ms]
  √  Response status code is 400

□ hosts / {hostId}
└ Get host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/hosts/:hostId [404 Not Found, 270B, 3ms]
  √  Response status code is 404

└ Update host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  PUT http://localhost:3000/hosts/:hostId [404 Not Found, 260B, 4ms]
  √  Response status code is 404

└ Delete host by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/hosts/:hostId [404 Not Found, 260B, 3ms]
  √  Response status code is 404

□ hosts
└ Create a new host
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/hosts [400 Bad Request, 269B, 4ms]
  √  Response status code is 400

□ properties / {propertyId}
└ Get deleted property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [404 Not Found, 274B, 2ms]
  √  Response status code is 404

└ Get non-existent property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/properties/w0123456-78f0-1234-5678-9abcdef01234 [404 Not Found, 274B, 3ms]
  √  Response status code is 404

└ Update property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  PUT http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [404 Not Found, 264B, 3ms]
  √  Response status code is 404

└ Delete property by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/properties/a9876543-21dc-4321-ba98-fedcba098765 [404 Not Found, 264B, 3ms]
  √  Response status code is 404

□ properties
└ Create a new property
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  POST http://localhost:3000/properties [400 Bad Request, 269B, 5ms]
  √  Response status code is 400

□ bookings / {bookingId}
└ Get booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [404 Not Found, 273B, 2ms]
  √  Response status code is 404

└ Update booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  PUT http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [404 Not Found, 263B, 3ms]
  √  Response status code is 404

└ Delete booking by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  DELETE http://localhost:3000/bookings/f0123456-78ab-cdef-0123-456789abcdef [404 Not Found, 263B, 2ms]
  √  Response status code is 404

□ bookings
└ Create a new booking
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  POST http://localhost:3000/bookings [400 Bad Request, 269B, 4ms]
  √  Response status code is 400

□ reviews / {reviewId}
└ Get review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  GET http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [404 Not Found, 272B, 3ms]
  √  Response status code is 404

└ Update review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  PUT http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [404 Not Found, 262B, 3ms]
  √  Response status code is 404

└ Delete review by ID
  POST http://0.0.0.0:3000/login [200 OK, 440B, 3ms]
  DELETE http://localhost:3000/reviews/j0123456-78f0-1234-5678-9abcdef01234 [404 Not Found, 262B, 3ms]
  √  Response status code is 404

□ reviews
└ Create a new review
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/reviews [400 Bad Request, 269B, 4ms]
  √  Response status code is 400

→ User Login
  POST http://0.0.0.0:3000/login [200 OK, 440B, 4ms]
  POST http://localhost:3000/login [401 Unauthorized, 278B, 4ms]
  √  Response status code is 401

┌─────────────────────────┬─────────────────┬─────────────────┐
│                         │        executed │          failed │
├─────────────────────────┼─────────────────┼─────────────────┤
│              iterations │               1 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│                requests │              44 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│            test-scripts │              44 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│      prerequest-scripts │              22 │               0 │
├─────────────────────────┼─────────────────┼─────────────────┤
│              assertions │              22 │               0 │
├─────────────────────────┴─────────────────┴─────────────────┤
│ total run duration: 2.2s                                    │
├─────────────────────────────────────────────────────────────┤
│ total data received: 5.03kB (approx)                        │
├─────────────────────────────────────────────────────────────┤
│ average response time: 4ms [min: 2ms, max: 37ms, s.d.: 5ms] │
└─────────────────────────────────────────────────────────────┘
